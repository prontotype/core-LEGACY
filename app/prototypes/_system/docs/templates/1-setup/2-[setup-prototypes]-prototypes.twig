{% extends "_layouts/skeleton.twig" %}

{% set content %}

# Prototypes and domains

By default, Prontotype is configured to serve up a single prototype at whichever domain you like. However it is also possible to configure a single Prontotype install to serve up multiple prototypes for different domains, should you choose. 

## Location and file structure of a prototype

All prototypes live in the `/prototypes` directory, and at the bare minumum consist of a **parent folder** (called whatever you like - this is your prototype's 'name') containing a `/templates` subfolder, within which is a file named `index.twig`.

So the most basic prototypes directory might look like this: 

![Minimal prototypes directory structure]({{ pt.assets.getUrl('img/prototype-minimal-structure.png') }})

Here there is one prototype (called **default**) with just one page in it, which is the homepage file `index.twig` (in the later [Pages and URLs]({{ pt.pages.getUrlById('pages') }}) section you'll learn how requests are routed to templates).

Each prototype directory can also contain subdirectories with configuration settings, data files, assets and extensions - all of which are discussed in later sections.

## Multiple prototypes, domains and environments

The `/config/prototypes.yml` file handles deciding which domains match up to which prototype. The default contents of this file are as follows:

<pre class="brush: yaml">default:
  domain: '*'
  prototype: default
  environment: live
</pre>

This configuration will result in Prontotype will trying and serve up the default prototype (i.e. the one in a folder named 'default') for *any* domain. 

If you wanted to serve up an additional prototype (one in a folder named **foo** within the `/prototypes` directory) at a different domain, you could amend the `prototypes.yml` file to look like this:

<pre class="brush: yaml">foo_prototype:
  domain: 'foo.com'
  prototype: foo
  environment: live

default:
  domain: '*'
  prototype: default
  environment: live
</pre>

This would serve up the **foo** prototype to all **foo.com** URLs, and the default prototype for all other URLs. Note that the reference name (e.g. 'foo_prototype') can be anything you like - it has no bearing on which prototype is served up.

The value of the `prototype` key should be the name of the prototype folder that you wish to serve up for that domain.

<p class="note">Note that the more specific URL patterns should be specified first in the file - Prontotype will stop looking as soon as it finds a domain to match.</p>

### Domain matching patterns

The value of the `domain` key uses a simple wildcard pattern to match domains against. Below are some examples of patterns and the resulting domains that would be matched:

| Pattern | URL matches |
| ----- | ----- |
| foo.com | foo.com |
| foo.* | foo.com, foo.dev, foo.site etc |
| *.dev | foo.dev, bar.dev, test.dev etc |
| *.foo.com | bar.foo.com, hello.foo.com etc |
| \*.foo.\* | bar.foo.com, bar.foo.site, hello.foo.com, etc |

### Environments {{ '{#' }}environments}

The `environment` key lets you specify an environment for each prototype match block. Using different environments is completely optional but lets you load different configuration files in for different matched domains if required (as discussed in the [configuration section]({{ pt.pages.getUrlById('config') }})).

So for example you could use the following `prontotypes.yml` file to serve up the same prototype but with a different environment value for the local **foo.dev** domain:

<pre class="brush: yaml">local:
  domain: 'foo.dev'
  prototype: default
  environment: local

default:
  domain: 'foo.com'
  prototype: default
  environment: live
</pre>

{% endset %}
